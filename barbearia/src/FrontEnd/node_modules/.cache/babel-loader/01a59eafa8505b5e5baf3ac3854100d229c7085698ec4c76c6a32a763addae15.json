{"ast":null,"code":"var _jsxFileName = \"C:\\\\Users\\\\Lucas\\\\Documents\\\\Projetos\\\\pro\\\\barbearia\\\\src\\\\frontend\\\\src\\\\components\\\\cliente\\\\atendimentos\\\\createAtend\\\\CreateAtendimento.jsx\",\n  _s = $RefreshSig$();\nimport React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport BarbeiroSelector from './selectors/BarbeiroSelector';\nimport ServicoSelector from './selectors/ServicoSelector';\nimport HorarioSelector from './selectors/HorarioSelector';\nimport styles from './CreateAtendimento.module.css';\nimport { jsxDEV as _jsxDEV } from \"react/jsx-dev-runtime\";\nconst CreateAtendimento = ({\n  modo,\n  atendimento\n}) => {\n  _s();\n  const [barbeiros, setBarbeiros] = useState([]);\n  const [selectedBarbeiroId, setSelectedBarbeiroId] = useState((atendimento === null || atendimento === void 0 ? void 0 : atendimento.barbeiroId) || null);\n  const [servicos, setServicos] = useState([]);\n  const [selectedServicos, setSelectedServicos] = useState((atendimento === null || atendimento === void 0 ? void 0 : atendimento.servicos) || []);\n  const [horarios, setHorarios] = useState([]);\n  const [selectedHorario, setSelectedHorario] = useState((atendimento === null || atendimento === void 0 ? void 0 : atendimento.horario) || '');\n  const [clienteId, setClienteId] = useState(null);\n  const navigate = useNavigate();\n  const location = useLocation();\n  const query = new URLSearchParams(location.search);\n  const clienteIdQuery = query.get('clienteId');\n  useEffect(() => {\n    if (clienteIdQuery) {\n      setClienteId(clienteIdQuery);\n    }\n  }, [clienteIdQuery]);\n  useEffect(() => {\n    axios.get('http://localhost:8080/barbeiros/buscar').then(response => setBarbeiros(response.data)).catch(error => console.error(\"Erro ao buscar barbeiros:\", error));\n  }, []);\n  useEffect(() => {\n    if (selectedBarbeiroId) {\n      axios.get(`/atendimento/buscarPorIdBarbeiro?barbeiroId=${selectedBarbeiroId}`).then(response => setServicos(response.data)).catch(error => console.error(\"Erro ao buscar serviços:\", error));\n    }\n  }, [selectedBarbeiroId]);\n  useEffect(() => {\n    if (selectedBarbeiroId && selectedServicos.length) {\n      // Utilize a data selecionada corretamente. Aqui, você precisa substituir '1' pela data real selecionada.\n      const duracaoServico = selectedServicos.reduce((acc, servico) => acc + servico.duracao, 0);\n      axios.get(`/atendimento/horarios-disponiveis?barbeiroId=${selectedBarbeiroId}&data=${new Date().toISOString().split('T')[0]}&duracaoServico=${duracaoServico}`).then(response => setHorarios(response.data)).catch(error => console.error(\"Erro ao buscar horários:\", error));\n    }\n  }, [selectedBarbeiroId, selectedServicos]);\n  const handleCreateAtendimento = () => {\n    // Criação do atendimento\n    const atendimentoData = {\n      clienteId,\n      barbeiroId: selectedBarbeiroId,\n      servicos: selectedServicos,\n      horario: selectedHorario\n    };\n    axios.post('/atendimento/criar', atendimentoData).then(() => {\n      console.log(\"Atendimento criado com sucesso!\");\n      navigate('/atendimento'); // Redireciona para a lista de atendimentos\n    }).catch(error => console.error(\"Erro ao criar atendimento:\", error));\n  };\n  const showButton = selectedBarbeiroId !== null && selectedServicos.length > 0 && selectedHorario !== '';\n  return /*#__PURE__*/_jsxDEV(\"div\", {\n    className: styles.container,\n    children: [/*#__PURE__*/_jsxDEV(\"p\", {\n      className: styles.title,\n      children: modo === 'atualizar' ? 'Alterar Atendimento' : 'Criar Atendimento'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 76,\n      columnNumber: 7\n    }, this), /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.selectorContainer,\n      children: /*#__PURE__*/_jsxDEV(BarbeiroSelector, {\n        barbeiros: barbeiros,\n        selectedBarbeiroId: selectedBarbeiroId,\n        onSelect: setSelectedBarbeiroId\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 81,\n        columnNumber: 9\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 80,\n      columnNumber: 7\n    }, this), selectedBarbeiroId && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.selectorContainer,\n      children: /*#__PURE__*/_jsxDEV(ServicoSelector, {\n        servicos: servicos,\n        selectedServicos: selectedServicos,\n        onSelect: setSelectedServicos\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 90,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 89,\n      columnNumber: 9\n    }, this), selectedServicos.length > 0 && /*#__PURE__*/_jsxDEV(\"div\", {\n      className: styles.selectorContainer,\n      children: /*#__PURE__*/_jsxDEV(HorarioSelector, {\n        horarios: horarios,\n        selectedHorario: selectedHorario,\n        onSelect: setSelectedHorario\n      }, void 0, false, {\n        fileName: _jsxFileName,\n        lineNumber: 100,\n        columnNumber: 11\n      }, this)\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 99,\n      columnNumber: 9\n    }, this), showButton && /*#__PURE__*/_jsxDEV(\"button\", {\n      className: styles.button,\n      onClick: handleCreateAtendimento,\n      children: modo === 'atualizar' ? 'Atualizar Atendimento' : 'Criar Atendimento'\n    }, void 0, false, {\n      fileName: _jsxFileName,\n      lineNumber: 109,\n      columnNumber: 9\n    }, this)]\n  }, void 0, true, {\n    fileName: _jsxFileName,\n    lineNumber: 75,\n    columnNumber: 5\n  }, this);\n};\n_s(CreateAtendimento, \"8g3DltmKzgt1W7DVrlCHQfZ/jwQ=\", false, function () {\n  return [useNavigate, useLocation];\n});\n_c = CreateAtendimento;\nexport default CreateAtendimento;\nvar _c;\n$RefreshReg$(_c, \"CreateAtendimento\");","map":{"version":3,"names":["React","useState","useEffect","axios","useNavigate","useLocation","BarbeiroSelector","ServicoSelector","HorarioSelector","styles","jsxDEV","_jsxDEV","CreateAtendimento","modo","atendimento","_s","barbeiros","setBarbeiros","selectedBarbeiroId","setSelectedBarbeiroId","barbeiroId","servicos","setServicos","selectedServicos","setSelectedServicos","horarios","setHorarios","selectedHorario","setSelectedHorario","horario","clienteId","setClienteId","navigate","location","query","URLSearchParams","search","clienteIdQuery","get","then","response","data","catch","error","console","length","duracaoServico","reduce","acc","servico","duracao","Date","toISOString","split","handleCreateAtendimento","atendimentoData","post","log","showButton","className","container","children","title","fileName","_jsxFileName","lineNumber","columnNumber","selectorContainer","onSelect","button","onClick","_c","$RefreshReg$"],"sources":["C:/Users/Lucas/Documents/Projetos/pro/barbearia/src/frontend/src/components/cliente/atendimentos/createAtend/CreateAtendimento.jsx"],"sourcesContent":["import React, { useState, useEffect } from 'react';\nimport axios from 'axios';\nimport { useNavigate, useLocation } from 'react-router-dom';\nimport BarbeiroSelector from './selectors/BarbeiroSelector';\nimport ServicoSelector from './selectors/ServicoSelector';\nimport HorarioSelector from './selectors/HorarioSelector';\nimport styles from './CreateAtendimento.module.css';\n\nconst CreateAtendimento = ({ modo, atendimento }) => {\n  const [barbeiros, setBarbeiros] = useState([]);\n  const [selectedBarbeiroId, setSelectedBarbeiroId] = useState(atendimento?.barbeiroId || null);\n  const [servicos, setServicos] = useState([]);\n  const [selectedServicos, setSelectedServicos] = useState(atendimento?.servicos || []);\n  const [horarios, setHorarios] = useState([]);\n  const [selectedHorario, setSelectedHorario] = useState(atendimento?.horario || '');\n  const [clienteId, setClienteId] = useState(null);\n\n  const navigate = useNavigate();\n  const location = useLocation();\n  const query = new URLSearchParams(location.search);\n  const clienteIdQuery = query.get('clienteId');\n\n  useEffect(() => {\n    if (clienteIdQuery) {\n      setClienteId(clienteIdQuery);\n    }\n  }, [clienteIdQuery]);\n\n  useEffect(() => {\n    axios.get('http://localhost:8080/barbeiros/buscar')\n      .then(response => setBarbeiros(response.data))\n      .catch(error => console.error(\"Erro ao buscar barbeiros:\", error));\n  }, []);\n\n  useEffect(() => {\n    if (selectedBarbeiroId) {\n      axios.get(`/atendimento/buscarPorIdBarbeiro?barbeiroId=${selectedBarbeiroId}`)\n        .then(response => setServicos(response.data))\n        .catch(error => console.error(\"Erro ao buscar serviços:\", error));\n    }\n  }, [selectedBarbeiroId]);\n\n  useEffect(() => {\n    if (selectedBarbeiroId && selectedServicos.length) {\n      // Utilize a data selecionada corretamente. Aqui, você precisa substituir '1' pela data real selecionada.\n      const duracaoServico = selectedServicos.reduce((acc, servico) => acc + servico.duracao, 0);\n      axios.get(`/atendimento/horarios-disponiveis?barbeiroId=${selectedBarbeiroId}&data=${new Date().toISOString().split('T')[0]}&duracaoServico=${duracaoServico}`)\n        .then(response => setHorarios(response.data))\n        .catch(error => console.error(\"Erro ao buscar horários:\", error));\n    }\n  }, [selectedBarbeiroId, selectedServicos]);\n\n  const handleCreateAtendimento = () => {\n    // Criação do atendimento\n    const atendimentoData = {\n      clienteId,\n      barbeiroId: selectedBarbeiroId,\n      servicos: selectedServicos,\n      horario: selectedHorario\n    };\n\n    axios.post('/atendimento/criar', atendimentoData)\n      .then(() => {\n        console.log(\"Atendimento criado com sucesso!\");\n        navigate('/atendimento'); // Redireciona para a lista de atendimentos\n      })\n      .catch(error => console.error(\"Erro ao criar atendimento:\", error));\n  };\n\n  const showButton = selectedBarbeiroId !== null &&\n    selectedServicos.length > 0 &&\n    selectedHorario !== '';\n\n  return (\n    <div className={styles.container}>\n      <p className={styles.title}>\n        {modo === 'atualizar' ? 'Alterar Atendimento' : 'Criar Atendimento'}\n      </p>\n\n      <div className={styles.selectorContainer}>\n        <BarbeiroSelector\n          barbeiros={barbeiros}\n          selectedBarbeiroId={selectedBarbeiroId}\n          onSelect={setSelectedBarbeiroId}\n        />\n      </div>\n\n      {selectedBarbeiroId && (\n        <div className={styles.selectorContainer}>\n          <ServicoSelector\n            servicos={servicos}\n            selectedServicos={selectedServicos}\n            onSelect={setSelectedServicos}\n          />\n        </div>\n      )}\n\n      {selectedServicos.length > 0 && (\n        <div className={styles.selectorContainer}>\n          <HorarioSelector\n            horarios={horarios}\n            selectedHorario={selectedHorario}\n            onSelect={setSelectedHorario}\n          />\n        </div>\n      )}\n\n      {showButton && (\n        <button className={styles.button} onClick={handleCreateAtendimento}>\n          {modo === 'atualizar' ? 'Atualizar Atendimento' : 'Criar Atendimento'}\n        </button>\n      )}\n    </div>\n  );\n};\n\nexport default CreateAtendimento;\n"],"mappings":"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","ignoreList":[]},"metadata":{},"sourceType":"module","externalDependencies":[]}